# Redis

## 缓存失效

### 击穿

再高并发、大数据量下,单个key在缓存中查找不到,从而去查询数据库导致数据库压力增大

解决办法:

1. 使用**synchronized**+双重校验机制
2. 设置value永不过期
3. 使用计划任务定时扫描缓存过期情况
4. 使用互斥锁

### 雪崩

多个key无法从缓存中获取数据,从而都从数据库获取数据,导致数据库压力增大

问题原因:

1. redis挂了
2. 多个key缓存过期

解决方法:

1. 均匀分布缓存过期时间,减少同时间段内过期的缓存
2. 使用计划任务重新加载缓存

### 击透

 一般是出现这种情况是因为恶意频繁查询才会对系统造成很大的问题: key缓存并且数据库不存在，所以每次查询都会查询数据库从而导致数据库崩溃。

## 持久化

redis的持久化方式有2中:RDB和AOF

### RDB

给现有数据做一个快照文件,并派生一个线程去写入到本地磁盘

### AOF

记录每一个指令到buffer缓冲区,然后通过派生线程写入到本地磁盘,在需要恢复数据的时候,顺序执行即可.

指令集写入磁盘有三种选择:1秒一次/每个指令都写入/不写入

AOF持久化存在指令集过大问题,redis对此会派生一个子线程去重新整理指令集

## 集群



